{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport apiClient from '../../api/apiClient';\n\n// 타입 정의\n\n// 초기 상태\nconst initialState = {\n  token: localStorage.getItem('token'),\n  user: null,\n  isAuthenticated: localStorage.getItem('token') ? true : false,\n  isLoading: false,\n  error: null\n};\n\n// 로그인 비동기 액션\nexport const login = createAsyncThunk('auth/login', async (credentials, {\n  rejectWithValue\n}) => {\n  try {\n    // 개발 모드에서는 가짜 로그인 성공 응답 반환\n    if (process.env.NODE_ENV === 'development') {\n      console.log('Development mode: Simulating successful login');\n\n      // 가짜 토큰 생성\n      const fakeToken = 'dev_fake_token_' + Date.now();\n      localStorage.setItem('token', fakeToken);\n\n      // 가짜 사용자 정보 반환\n      const mockData = {\n        access: fakeToken,\n        refresh: 'dev_fake_refresh_token',\n        user: {\n          id: 1,\n          username: credentials.username,\n          email: `${credentials.username}@example.com`,\n          firstName: '테스트',\n          lastName: '사용자',\n          role: 'student'\n        }\n      };\n      return mockData;\n    }\n\n    // 백엔드 API 엔드포인트로 요청 (프로덕션 모드)\n    const response = await apiClient.post('/api/auth/login/', credentials);\n\n    // 로컬 스토리지에 토큰 저장\n    localStorage.setItem('token', response.data.access);\n    return response.data;\n  } catch (error) {\n    console.error('Login error:', error);\n\n    // 개발 모드에서는 오류가 발생해도 성공으로 처리\n    if (process.env.NODE_ENV === 'development') {\n      console.log('Development mode: Ignoring login error and returning mock data');\n\n      // 가짜 토큰 생성\n      const fakeToken = 'dev_fake_token_' + Date.now();\n      localStorage.setItem('token', fakeToken);\n\n      // 가짜 사용자 정보 반환\n      return {\n        access: fakeToken,\n        refresh: 'dev_fake_refresh_token',\n        user: {\n          id: 1,\n          username: credentials.username,\n          email: `${credentials.username}@example.com`,\n          firstName: '테스트',\n          lastName: '사용자',\n          role: 'student'\n        }\n      };\n    }\n    if (error.response) {\n      var _error$response$data, _error$response$data2;\n      // 서버 응답 오류 처리\n      return rejectWithValue(((_error$response$data = error.response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.detail) || ((_error$response$data2 = error.response.data) === null || _error$response$data2 === void 0 ? void 0 : _error$response$data2.message) || 'Login failed');\n    }\n    return rejectWithValue('Network error occurred. Please check your connection and try again.');\n  }\n});\n\n// 회원가입 비동기 액션\nexport const register = createAsyncThunk('auth/register', async (credentials, {\n  rejectWithValue\n}) => {\n  try {\n    // 개발 중 항상 성공으로 처리 (백엔드 연결 없이 테스트 가능)\n    console.log('Process env check:', {\n      isDev: process.env.NODE_ENV === 'development',\n      useRealApi: process.env.REACT_APP_USE_REAL_API\n    });\n\n    // 항상 개발 모드에서는 가짜 응답 사용하도록 수정 (테스트용)\n    if (process.env.NODE_ENV === 'development') {\n      // 가짜 응답 데이터로 성공 시뮬레이션\n      console.log('Development mode: Simulating successful registration');\n      const mockData = {\n        id: 1,\n        username: credentials.username,\n        email: credentials.email,\n        firstName: credentials.firstName,\n        lastName: credentials.lastName,\n        role: 'student' // 타입스크립트를 위해 명시적으로 리터럴 타입 지정\n      };\n      return mockData;\n    }\n\n    // 실제 백엔드 API 요청 (프로덕션 모드에서만 실행)\n    const response = await apiClient.post('/api/auth/register/', credentials);\n    return response.data;\n  } catch (error) {\n    console.error('Registration error:', error);\n\n    // 오류 세부 정보 로깅\n    if (error.response) {\n      console.log('Error response:', error.response.data);\n    }\n\n    // 개발 모드에서는 오류가 발생해도 성공으로 처리\n    if (process.env.NODE_ENV === 'development') {\n      console.log('Development mode: Ignoring error and returning mock data');\n      const mockData = {\n        id: 1,\n        username: credentials.username,\n        email: credentials.email,\n        firstName: credentials.firstName,\n        lastName: credentials.lastName,\n        role: 'student'\n      };\n      return mockData;\n    }\n    if (error.response) {\n      var _error$response$data3, _error$response$data4;\n      // 서버 응답 오류 더 자세히 처리\n      const errorMessage = ((_error$response$data3 = error.response.data) === null || _error$response$data3 === void 0 ? void 0 : _error$response$data3.detail) || ((_error$response$data4 = error.response.data) === null || _error$response$data4 === void 0 ? void 0 : _error$response$data4.message) || (typeof error.response.data === 'string' ? error.response.data : 'Registration failed');\n      return rejectWithValue(errorMessage);\n    }\n\n    // 네트워크 오류 등 처리\n    return rejectWithValue('Network error occurred. Please check your connection and try again.');\n  }\n});\n\n// 사용자 정보 가져오기 액션\nexport const getUserProfile = createAsyncThunk('auth/getUserProfile', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    if (!auth.token) {\n      return rejectWithValue('No authentication token');\n    }\n\n    // 개발 모드에서는 항상 가짜 데이터 반환\n    if (process.env.NODE_ENV === 'development') {\n      console.log('Development mode: Simulating user profile');\n\n      // 이미 상태에 사용자 정보가 있으면 그대로 사용\n      if (auth.user) {\n        return auth.user;\n      }\n\n      // 토큰에서 사용자 이름 추출 시도 (개발 모드 가짜 토큰 형식: dev_fake_token_TIMESTAMP)\n      let username = 'testuser';\n      try {\n        // 로컬 스토리지에서 사용자 이름 정보 가져오기 시도\n        const savedUsername = localStorage.getItem('dev_username');\n        if (savedUsername) {\n          username = savedUsername;\n        }\n      } catch (e) {\n        console.log('Failed to parse username from token');\n      }\n\n      // 기본 가짜 사용자 정보\n      const mockUser = {\n        id: 1,\n        username: username,\n        email: `${username}@example.com`,\n        firstName: '테스트',\n        lastName: '사용자',\n        role: 'student'\n      };\n      return mockUser;\n    }\n\n    // 실제 백엔드 API 요청\n    const response = await apiClient.get('/api/auth/profile/');\n    // 토큰은 apiClient의 인터셉터에서 자동으로 추가됨\n\n    return response.data;\n  } catch (error) {\n    console.error('Profile fetch error:', error);\n\n    // 개발 모드에서는 오류가 발생해도 성공으로 처리\n    if (process.env.NODE_ENV === 'development') {\n      console.log('Development mode: Ignoring profile fetch error and returning mock data');\n\n      // 기본 가짜 사용자 정보\n      const mockUser = {\n        id: 1,\n        username: 'testuser',\n        email: 'test@example.com',\n        firstName: '테스트',\n        lastName: '사용자',\n        role: 'student'\n      };\n      return mockUser;\n    }\n    if (error.response) {\n      var _error$response$data5, _error$response$data6;\n      const errorMessage = ((_error$response$data5 = error.response.data) === null || _error$response$data5 === void 0 ? void 0 : _error$response$data5.detail) || ((_error$response$data6 = error.response.data) === null || _error$response$data6 === void 0 ? void 0 : _error$response$data6.message) || 'Failed to fetch user profile';\n      return rejectWithValue(errorMessage);\n    }\n    return rejectWithValue('Network error occurred. Please check your connection and try again.');\n  }\n});\n\n// Auth 슬라이스\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logout: state => {\n      localStorage.removeItem('token');\n      state.token = null;\n      state.user = null;\n      state.isAuthenticated = false;\n      state.error = null;\n    },\n    clearError: state => {\n      state.error = null;\n    }\n  },\n  extraReducers: builder => {\n    // 로그인 액션 처리\n    builder.addCase(login.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(login.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isAuthenticated = true;\n      state.token = action.payload.access;\n      state.user = action.payload.user;\n    }).addCase(login.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n\n    // 회원가입 액션 처리\n    builder.addCase(register.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(register.fulfilled, state => {\n      state.isLoading = false;\n    }).addCase(register.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n    });\n\n    // 사용자 정보 가져오기 액션 처리\n    builder.addCase(getUserProfile.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getUserProfile.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.user = action.payload;\n    }).addCase(getUserProfile.rejected, (state, action) => {\n      state.isLoading = false;\n      state.error = action.payload;\n      // 토큰이 만료된 경우 로그아웃 처리\n      if (action.payload === 'Token is invalid or expired') {\n        state.token = null;\n        state.user = null;\n        state.isAuthenticated = false;\n        localStorage.removeItem('token');\n      }\n    });\n  }\n});\nexport const {\n  logout,\n  clearError\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","apiClient","initialState","token","localStorage","getItem","user","isAuthenticated","isLoading","error","login","credentials","rejectWithValue","process","env","NODE_ENV","console","log","fakeToken","Date","now","setItem","mockData","access","refresh","id","username","email","firstName","lastName","role","response","post","data","_error$response$data","_error$response$data2","detail","message","register","isDev","useRealApi","REACT_APP_USE_REAL_API","_error$response$data3","_error$response$data4","errorMessage","getUserProfile","_","getState","auth","savedUsername","e","mockUser","get","_error$response$data5","_error$response$data6","authSlice","name","reducers","logout","state","removeItem","clearError","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["/Users/seohun/Documents/LMS (1)/src/frontend/src/features/auth/authSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport apiClient from '../../api/apiClient';\nimport { jwtDecode } from 'jwt-decode';\n\n// 타입 정의\ninterface User {\n  id: number;\n  username: string;\n  email: string;\n  firstName: string;\n  lastName: string;\n  role: 'student' | 'instructor' | 'admin';\n}\n\ninterface AuthState {\n  token: string | null;\n  user: User | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  error: string | null;\n}\n\ninterface LoginCredentials {\n  username: string;\n  password: string;\n}\n\ninterface RegisterCredentials {\n  username: string;\n  email: string;\n  password: string;\n  firstName: string;\n  lastName: string;\n}\n\ninterface LoginResponse {\n  access: string;\n  refresh: string;\n  user: User;\n}\n\n// 초기 상태\nconst initialState: AuthState = {\n  token: localStorage.getItem('token'),\n  user: null,\n  isAuthenticated: localStorage.getItem('token') ? true : false,\n  isLoading: false,\n  error: null,\n};\n\n// 로그인 비동기 액션\nexport const login = createAsyncThunk(\n  'auth/login',\n  async (credentials: LoginCredentials, { rejectWithValue }) => {\n    try {\n      // 개발 모드에서는 가짜 로그인 성공 응답 반환\n      if (process.env.NODE_ENV === 'development') {\n        console.log('Development mode: Simulating successful login');\n        \n        // 가짜 토큰 생성\n        const fakeToken = 'dev_fake_token_' + Date.now();\n        localStorage.setItem('token', fakeToken);\n        \n        // 가짜 사용자 정보 반환\n        const mockData: LoginResponse = {\n          access: fakeToken,\n          refresh: 'dev_fake_refresh_token',\n          user: {\n            id: 1,\n            username: credentials.username,\n            email: `${credentials.username}@example.com`,\n            firstName: '테스트',\n            lastName: '사용자',\n            role: 'student' as const\n          }\n        };\n        \n        return mockData;\n      }\n      \n      // 백엔드 API 엔드포인트로 요청 (프로덕션 모드)\n      const response = await apiClient.post<LoginResponse>(\n        '/api/auth/login/',\n        credentials\n      );\n      \n      // 로컬 스토리지에 토큰 저장\n      localStorage.setItem('token', response.data.access);\n      \n      return response.data;\n    } catch (error: any) {\n      console.error('Login error:', error);\n      \n      // 개발 모드에서는 오류가 발생해도 성공으로 처리\n      if (process.env.NODE_ENV === 'development') {\n        console.log('Development mode: Ignoring login error and returning mock data');\n        \n        // 가짜 토큰 생성\n        const fakeToken = 'dev_fake_token_' + Date.now();\n        localStorage.setItem('token', fakeToken);\n        \n        // 가짜 사용자 정보 반환\n        return {\n          access: fakeToken,\n          refresh: 'dev_fake_refresh_token',\n          user: {\n            id: 1,\n            username: credentials.username,\n            email: `${credentials.username}@example.com`,\n            firstName: '테스트',\n            lastName: '사용자',\n            role: 'student' as const\n          }\n        };\n      }\n      \n      if (error.response) {\n        // 서버 응답 오류 처리\n        return rejectWithValue(error.response.data?.detail || error.response.data?.message || 'Login failed');\n      }\n      return rejectWithValue('Network error occurred. Please check your connection and try again.');\n    }\n  }\n);\n\n// 회원가입 비동기 액션\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (credentials: RegisterCredentials, { rejectWithValue }) => {\n    try {\n      // 개발 중 항상 성공으로 처리 (백엔드 연결 없이 테스트 가능)\n      console.log('Process env check:', {\n        isDev: process.env.NODE_ENV === 'development',\n        useRealApi: process.env.REACT_APP_USE_REAL_API\n      });\n      \n      // 항상 개발 모드에서는 가짜 응답 사용하도록 수정 (테스트용)\n      if (process.env.NODE_ENV === 'development') {\n        // 가짜 응답 데이터로 성공 시뮬레이션\n        console.log('Development mode: Simulating successful registration');\n        const mockData: User = {\n          id: 1,\n          username: credentials.username,\n          email: credentials.email,\n          firstName: credentials.firstName,\n          lastName: credentials.lastName,\n          role: 'student' as const  // 타입스크립트를 위해 명시적으로 리터럴 타입 지정\n        };\n        return mockData;\n      }\n    \n      // 실제 백엔드 API 요청 (프로덕션 모드에서만 실행)\n      const response = await apiClient.post<User>(\n        '/api/auth/register/',\n        credentials\n      );\n      return response.data;\n    } catch (error: any) {\n      console.error('Registration error:', error);\n      \n      // 오류 세부 정보 로깅\n      if (error.response) {\n        console.log('Error response:', error.response.data);\n      }\n      \n      // 개발 모드에서는 오류가 발생해도 성공으로 처리\n      if (process.env.NODE_ENV === 'development') {\n        console.log('Development mode: Ignoring error and returning mock data');\n        const mockData: User = {\n          id: 1,\n          username: credentials.username,\n          email: credentials.email,\n          firstName: credentials.firstName,\n          lastName: credentials.lastName,\n          role: 'student' as const\n        };\n        return mockData;\n      }\n      \n      if (error.response) {\n        // 서버 응답 오류 더 자세히 처리\n        const errorMessage = \n          error.response.data?.detail || \n          error.response.data?.message || \n          (typeof error.response.data === 'string' ? error.response.data : 'Registration failed');\n        return rejectWithValue(errorMessage);\n      }\n      \n      // 네트워크 오류 등 처리\n      return rejectWithValue('Network error occurred. Please check your connection and try again.');\n    }\n  }\n);\n\n// 사용자 정보 가져오기 액션\nexport const getUserProfile = createAsyncThunk(\n  'auth/getUserProfile',\n  async (_, { getState, rejectWithValue }) => {\n    try {\n      const { auth } = getState() as { auth: AuthState };\n      \n      if (!auth.token) {\n        return rejectWithValue('No authentication token');\n      }\n      \n      // 개발 모드에서는 항상 가짜 데이터 반환\n      if (process.env.NODE_ENV === 'development') {\n        console.log('Development mode: Simulating user profile');\n        \n        // 이미 상태에 사용자 정보가 있으면 그대로 사용\n        if (auth.user) {\n          return auth.user;\n        }\n        \n        // 토큰에서 사용자 이름 추출 시도 (개발 모드 가짜 토큰 형식: dev_fake_token_TIMESTAMP)\n        let username = 'testuser';\n        try {\n          // 로컬 스토리지에서 사용자 이름 정보 가져오기 시도\n          const savedUsername = localStorage.getItem('dev_username');\n          if (savedUsername) {\n            username = savedUsername;\n          }\n        } catch (e) {\n          console.log('Failed to parse username from token');\n        }\n        \n        // 기본 가짜 사용자 정보\n        const mockUser: User = {\n          id: 1,\n          username: username,\n          email: `${username}@example.com`,\n          firstName: '테스트',\n          lastName: '사용자',\n          role: 'student' as const\n        };\n        return mockUser;\n      }\n      \n      // 실제 백엔드 API 요청\n      const response = await apiClient.get<User>('/api/auth/profile/');\n      // 토큰은 apiClient의 인터셉터에서 자동으로 추가됨\n      \n      return response.data;\n    } catch (error: any) {\n      console.error('Profile fetch error:', error);\n      \n      // 개발 모드에서는 오류가 발생해도 성공으로 처리\n      if (process.env.NODE_ENV === 'development') {\n        console.log('Development mode: Ignoring profile fetch error and returning mock data');\n        \n        // 기본 가짜 사용자 정보\n        const mockUser: User = {\n          id: 1,\n          username: 'testuser',\n          email: 'test@example.com',\n          firstName: '테스트',\n          lastName: '사용자',\n          role: 'student' as const\n        };\n        return mockUser;\n      }\n      \n      if (error.response) {\n        const errorMessage = \n          error.response.data?.detail || \n          error.response.data?.message || \n          'Failed to fetch user profile';\n        return rejectWithValue(errorMessage);\n      }\n      return rejectWithValue('Network error occurred. Please check your connection and try again.');\n    }\n  }\n);\n\n// Auth 슬라이스\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    logout: (state) => {\n      localStorage.removeItem('token');\n      state.token = null;\n      state.user = null;\n      state.isAuthenticated = false;\n      state.error = null;\n    },\n    clearError: (state) => {\n      state.error = null;\n    },\n  },\n  extraReducers: (builder) => {\n    // 로그인 액션 처리\n    builder\n      .addCase(login.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(login.fulfilled, (state, action: PayloadAction<LoginResponse>) => {\n        state.isLoading = false;\n        state.isAuthenticated = true;\n        state.token = action.payload.access;\n        state.user = action.payload.user;\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as string;\n      });\n    \n    // 회원가입 액션 처리\n    builder\n      .addCase(register.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(register.fulfilled, (state) => {\n        state.isLoading = false;\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as string;\n      });\n    \n    // 사용자 정보 가져오기 액션 처리\n    builder\n      .addCase(getUserProfile.pending, (state) => {\n        state.isLoading = true;\n        state.error = null;\n      })\n      .addCase(getUserProfile.fulfilled, (state, action: PayloadAction<User>) => {\n        state.isLoading = false;\n        state.user = action.payload;\n      })\n      .addCase(getUserProfile.rejected, (state, action) => {\n        state.isLoading = false;\n        state.error = action.payload as string;\n        // 토큰이 만료된 경우 로그아웃 처리\n        if (action.payload === 'Token is invalid or expired') {\n          state.token = null;\n          state.user = null;\n          state.isAuthenticated = false;\n          localStorage.removeItem('token');\n        }\n      });\n  },\n});\n\nexport const { logout, clearError } = authSlice.actions;\nexport default authSlice.reducer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}