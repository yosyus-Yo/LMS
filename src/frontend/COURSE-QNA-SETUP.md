# 강의별 Q&A 게시판 설치 가이드

## 📋 설치 단계

### 1. 데이터베이스 스키마 적용

Supabase 대시보드 > SQL Editor에서 다음 순서로 실행:

1. **기본 테이블 생성**
   ```bash
   # course-qna-schema.sql 파일 내용을 복사하여 실행
   ```

2. **RPC 함수 추가**
   ```bash
   # course-qna-rpc-functions.sql 파일 내용을 복사하여 실행
   ```

### 2. 기능 확인

1. **Q&A 목록 페이지**: `/courses/{courseId}/qna`
2. **질문 작성 페이지**: `/courses/{courseId}/qna/write`
3. **Q&A 상세 페이지**: `/courses/{courseId}/qna/{qnaId}`

## 🔧 주요 기능

### 학생 기능
- ✅ 질문 작성 (공개/비공개 선택 가능)
- ✅ 질문 수정/삭제 (본인 글만)
- ✅ 질문 목록 조회 (필터링 및 검색)
- ✅ 좋아요 기능
- ✅ 내 질문 관리

### 강사 기능
- ✅ 모든 질문 조회 (공개/비공개 포함)
- ✅ 답변 작성
- ✅ 답변 수정/삭제 (본인 답변만)
- ✅ 질문 상태 관리 (자동으로 답변 시 'answered'로 변경)

### 관리자 기능
- ✅ 모든 Q&A 접근 권한
- ✅ 모든 질문/답변 관리
- ✅ 시스템 전체 Q&A 통계

## 📊 권한 체계

### RLS (Row Level Security) 정책

1. **공개 질문**: 수강생과 강사가 조회 가능
2. **비공개 질문**: 작성자와 강사만 조회 가능
3. **질문 작성**: 수강신청한 학생만 가능
4. **답변 작성**: 해당 강의 강사만 가능
5. **수정/삭제**: 작성자 본인만 가능

## 🎯 UI/UX 특징

### 모바일 최적화
- 터치 친화적인 인터페이스
- 카드 기반 레이아웃
- 반응형 디자인
- 모바일 전용 네비게이션

### 사용자 경험
- 직관적인 상태 표시 (답변대기/답변완료)
- 실시간 통계 표시
- 검색 및 필터링
- 좋아요 및 조회수 표시

## 🔐 보안 기능

1. **수강신청 확인**: 질문 작성 전 수강신청 여부 검증
2. **강사 권한 확인**: 답변 작성 시 강사 여부 검증
3. **작성자 확인**: 수정/삭제 시 본인 여부 검증
4. **비공개 질문**: 권한이 있는 사용자만 접근 가능

## 📈 추가 기능 계획

- [ ] 파일 첨부 기능
- [ ] 이메일 알림
- [ ] Q&A 북마크
- [ ] 베스트 Q&A 선정
- [ ] 태그 시스템
- [ ] Q&A 내보내기

## 🛠 문제 해결

### 일반적인 문제

1. **Q&A 접근 불가**
   - 수강신청 여부 확인
   - 로그인 상태 확인

2. **답변 작성 불가**
   - 강사 권한 확인
   - 강의 소유자 확인

3. **질문 조회 불가**
   - RLS 정책 확인
   - 권한 설정 확인

### 디버깅 팁

1. 브라우저 개발자 도구 콘솔 확인
2. Supabase 로그 확인
3. RLS 정책 상태 확인

## 📞 지원

문제가 발생하면:
1. 먼저 브라우저 콘솔 에러 확인
2. Supabase 대시보드에서 RLS 정책 확인
3. 수강신청 및 권한 상태 확인